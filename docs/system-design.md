# DragonOS CI Dashboard 系统设计方案

## 一、总体设计理念

### 1. 设计原则
- **现代化**：采用流行的后台管理界面风格，侧边栏导航 + 顶部面包屑
- **响应式**：适配不同屏幕尺寸
- **模块化**：功能模块清晰分离
- **易用性**：减少页面跳转，采用 Tab 多标签设计
- **一致性**：统一的视觉风格和交互方式

### 2. 技术栈
- Vue 3 + TypeScript
- TDesign Vue Next
- Pinia 状态管理
- Vue Router 路由管理

## 二、整体布局设计

```
┌─────────────────────────────────────────────────────────┐
│                    顶部导航栏                              │
│  ┌─────────────┐ ┌──────────┐ ┌──────────────┐          │
│  │    Logo     │ │  面包屑    │ │   用户信息     │          │
│  └─────────────┘ └──────────┘ └──────────────┘          │
├─────────────────────────────────────────────────────────┤
│                                                    │    │
│  ┌────────────────┐                                │    │
│  │                │                                │    │
│  │   侧边栏导航     │           主内容区                │    │
│  │                │                                │    │
│  │                │                                │    │
│  │                │                                │    │
│  │                │                                │    │
│  └────────────────┘                                │    │
│                                                    │    │
└─────────────────────────────────────────────────────────┘
```

## 三、页面结构重新设计

### 1. 主布局框架 (MainLayout.vue)

```
┌─────────────────────────────────────────────────────────┐
│ 顶部栏 (Header)                                           │
│ ├─ Logo & 系统名称 ──┬─ 面包屑导航 ──┬─ 用户菜单          │
│                    │                │                    │
├─────────────────────────────────────────────────────────┤
│ 主体区域                                                 │
│ ├─ 侧边栏 ───┬─ 内容区域 (Content)                       │
│            │   ├─ 标签页 (Tabs)                        │
│            │   └─ 页面内容                             │
│            │                                          │
│            │                                          │
└────────────┴──────────────────────────────────────────┘
```

### 2. 侧边栏导航结构

```
┌── 导航菜单 ─────────────────────────┐
│                                    │
│ 🏠 仪表盘                          │
│ ──────────────────────────────    │
│ 📊 测试管理                        │
│   ├─ 测试概览                      │
│   ├─ 测试运行列表                  │
│   └─ 测试报告                      │
│ ──────────────────────────────    │
│ 🔧 系统管理                        │
│   ├─ API密钥管理                  │
│   ├─ 项目管理                      │
│   └─ 用户管理                      │
│ ──────────────────────────────    │
│ 📈 监控中心                        │
│   ├─ 系统监控                      │
│   └─ 性能统计                      │
│ ──────────────────────────────    │
│ ⚙️ 系统设置                        │
│   ├─ 个人中心                      │
│   └─ 系统配置                      │
│                                    │
└────────────────────────────────────┘
```

## 四、页面模块详细设计

### 1. 仪表盘页面

```
┌─────────────────────────────────────────────────────────┐
│  📊 测试概览                                              │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │
│  │   总测试数   │ │   今日运行   │ │   成功率     │        │
│  │    1,234    │ │     56      │ │    98.5%    │        │
│  └─────────────┘ └─────────────┘ └─────────────┘        │
├─────────────────────────────────────────────────────────┤
│  📈 趋势图表                                              │
│  ┌─────────────────────────┐ ┌─────────────────────┐   │
│  │    测试执行趋势图        │ │    成功率趋势图      │   │
│  └─────────────────────────┘ └─────────────────────┘   │
├─────────────────────────────────────────────────────────┤
│  📋 最近测试任务                                          │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ 分支 │ Commit ID │ 状态 │ 执行时间 │ 操作          │ │
│  │ main │ abc123    │ ✅   │ 2小时    │ [查看详情]    │ │
│  │ dev  │ def456    │ ❌   │ 3小时    │ [查看详情]    │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 2. 测试运行列表页面

```
┌─────────────────────────────────────────────────────────┐
│  🔍 筛选条件                                              │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ 分支: [输入框] 分支: [选择] 时间范围: [日期选择器]      │ │
│  │                    [搜索] [重置] [导出]               │ │
│  └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│  📋 测试列表                                              │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ ▼ 刷新 │ 导出 │ 批量操作                    [新建测试] │ │
│  ├─────────────────────────────────────────────────────┤ │
│  │ ☐ │ ID  │ 分支   │ Commit   │ 状态  │ 时间   │ 操作 │ │
│  │ ☐ │ 001 │ main  │ abc123   │ ✅    │ 10:00 │ ...  │ │
│  │ ☐ │ 002 │ dev   │ def456   │ ❌    │ 09:30 │ ...  │ │
│  └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│  ← 上一页 1 2 3 ... 10 下一页 → 共100条                   │
└─────────────────────────────────────────────────────────┘
```

### 3. 测试详情页面（多标签设计）

```
┌─────────────────────────────────────────────────────────┐
│  📝 测试信息                                              │
│  ├─ 基本信息 ──┬─ 测试用例 ──┬─ 日志输出 ──┬─ 附件下载 ─┤ │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  基本信息 Tab 内容:                                       │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ 测试ID: TR-001                                      │ │
│  │ 分支: master                                        │ │
│  │ Commit: abc1234                                     │ │
│  │ 开始时间: 2024-01-01 10:00:00                       │ │
│  │ 结束时间: 2024-01-01 10:30:00                       │ │
│  │ 执行节点: node-01                                   │ │
│  │ 状态: ✅ 成功                                       │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  测试用例 Tab 内容:                                       │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ ✅ TestCase001 │ 基础功能测试 │ 2s                  │ │
│  │ ✅ TestCase002 │ 边界值测试   │ 3s                  │ │
│  │ ❌ TestCase003 │ 异常处理测试 │ 15s │ [查看错误]    │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 4. API密钥管理页面

```
┌─────────────────────────────────────────────────────────┐
│  🔑 API密钥管理                                          │
│                    [创建新密钥]                          │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────┐ │
│  │ 密钥名称           │ 创建时间   │ 最后使用   │ 操作    │ │
│  ├─────────────────────────────────────────────────────┤ │
│  │ Production-Key    │ 2024-01-01 │ 2024-01-15 │ [编辑]  │ │
│  │                   │ •••••••••••            │ [删除]  │ │
│  │ Development-Key   │ 2024-01-05 │ 2024-01-14 │ [编辑]  │ │
│  │                   │ •••••••••••            │ [删除]  │ │
│  └─────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────┤
│  创建/编辑密钥弹窗:                                        │
│  ┌─────────────────────┐                                │
│  │ 密钥名称: [输入框]  │                                │
│  │ 有效期: [日期选择]  │                                │
│  │ 权限: ☑读取 ☐写入   │                                │
│  │      [取消] [保存]  │                                │
│  └─────────────────────┘                                │
└─────────────────────────────────────────────────────────┘
```

### 5. 个人中心页面

```
┌─────────────────────────────────────────────────────────┐
│  👤 个人中心                                              │
│  ├─ 基本信息 ──┬─ 修改密码 ──┬─ 操作日志 ──┬─ 安全设置 ─┤ │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  基本信息 Tab:                                           │
│  ┌─────────────────────┐ ┌─────────────────────────┐   │
│  │ [头像上传区]        │ │ 用户名: admin          │   │
│  │                    │ │ 邮箱: admin@example.com│   │
│  │                    │ │ 角色: 超级管理员        │   │
│  │                    │ │ 创建时间: 2024-01-01    │   │
│  │                    │ │          [保存更改]     │   │
│  └─────────────────────┘ └─────────────────────────┘   │
│                                                         │
│  修改密码 Tab:                                           │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ 当前密码: [●●●●●●●●]                                 │ │
│  │ 新密码:   [●●●●●●●●]                                 │ │
│  │ 确认密码: [●●●●●●●●]                                 │ │
│  │                     [修改密码]                      │ │
│  └─────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

## 五、路由结构设计

### 1. 整体路由结构

```
/login                     # 登录页
/admin (MainLayout)
  ├── /dashboard          # 仪表盘（默认页）
  ├── /test
  │   ├── /overview      # 测试概览
  │   ├── /runs          # 测试运行列表
  │   ├── /runs/:id      # 测试详情
  │   └── /reports       # 测试报告
  ├── /system
  │   ├── /api-keys      # API密钥管理
  │   ├── /projects      # 项目管理
  │   └── /users         # 用户管理
  ├── /monitor
  │   ├── /system        # 系统监控
  │   └── /statistics    # 性能统计
  └── /settings
      ├── /profile       # 个人中心
      └── /config        # 系统配置
```

### 2. 导航逻辑设计

#### 非登录用户访问流程
```
访问任何页面 → 检查登录状态 → 未登录则跳转到 /login
```

#### 登录后访问流程
```
/login → /admin → /admin/dashboard (仪表盘)
```

#### 页面跳转逻辑
- 所有管理页面都在 `/admin` 下，使用 MainLayout 布局
- 首页（测试浏览）可以独立存在，不需要登录
- 点击管理员登录从首页跳转到 `/login`
- 登录成功后进入 `/admin/dashboard`

## 六、响应式设计

### 1. 桌面端 (≥1200px)
- 侧边栏固定展开（240px）
- 顶部导航完整显示

### 2. 平板端 (768px - 1199px)
- 侧边栏可收缩（64px）
- 保持顶部导航

### 3. 移动端 (<768px)
- 侧边栏抽屉模式
- 简化面包屑显示
- 表格横向滚动

## 七、视觉设计规范（Figma 风格 - 白&黄配色）

### 1. 设计理念
采用 Figma 流行的简约卡片风格，以白色为主色调，搭配温暖的黄色作为强调色，营造现代、清爽、友好的界面氛围。

### 2. 主题色彩
- **主色（黄）**：#FCD34D → #F59E0B（渐变黄）
- **主色深色**：#D97706
- **背景色**：#FFFFFF（纯白）
- **次级背景**：#FAFAFA（极浅灰）
- **卡片背景**：#FFFFFF
- **边框色**：#E5E7EB（浅灰）
- **分割线**：#F3F4F6

### 3. 功能色彩
- **成功**：#10B981（翡翠绿）
- **警告**：#F59E0B（琥珀黄）
- **错误**：#EF4444（红）
- **信息**：#3B82F6（蓝）
- **文本主色**：#1F2937（深灰）
- **文本次色**：#6B7280（中灰）
- **文本辅助**：#9CA3AF（浅灰）

### 4. 卡片风格规范
```
┌─────────────────────────────────────────────┐
│  █ 卡片标题                                  │
│  ─────────────────────────────────────────   │
│                                             │
│  卡片内容区域                                │
│  • 圆角：12px                                │
│  • 阴影：0 1px 3px rgba(0,0,0,0.05)        │
│  • 内边距：24px                              │
│  • 悬停阴影：0 4px 12px rgba(0,0,0,0.08)   │
│                                             │
└─────────────────────────────────────────────┘
```

### 5. 按钮设计
```
主要按钮：
┌──────────────────┐
│  [🔍] 搜索        │  背景：#F59E0B  文字：白色
└──────────────────┘

次要按钮：
┌──────────────────┐
│  ⟲ 刷新           │  背景：白色  边框：#E5E7EB
└──────────────────┘

幽灵按钮：
┌──────────────────┐
│  查看详情          │  背景：透明  文字：#F59E0B
└──────────────────┘
```

### 6. 间距规范
- **页面边距**：32px
- **卡片间距**：24px
- **组件间距**：16px
- **表单项间距**：20px
- **文字行高**：1.6

### 7. 字体规范
- **页面标题**：24px/600（Semibold）
- **卡片标题**：18px/600（Semibold）
- **正文内容**：14px/400（Regular）
- **辅助文字**：12px/400（Regular）
- **数据展示**：28px/700（Bold）

### 8. 图标风格
- 使用线性图标（Outline）
- 图标尺寸：16px、20px、24px
- 颜色跟随文字色或使用主题色

### 9. 特殊元素
- **状态标签**：圆角 16px，内边距 4px 12px
- **徽章**：圆形，直径 8px
- **进度条**：圆角 4px，高度 8px
- **输入框**：圆角 8px，边框 1px，高度 40px

### 10. 动画效果
- **页面切换**：淡入淡出 200ms
- **卡片悬停**：阴影变化 150ms
- **按钮点击**：轻微缩放 100ms
- **数据加载**：骨架屏动画

### 11. 配色示例
```
Header 背景色：#FFFFFF
Sidebar 背景：#FAFAFA
主内容区背景：#F9FAFB
卡片背景：#FFFFFF
强调色按钮：#F59E0B
成功状态：#10B981
警告状态：#F59E0B
错误状态：#EF4444
```

## 八、交互设计

### 1. 加载状态
- 页面级：骨架屏
- 表格：加载动画
- 按钮：loading 状态

### 2. 反馈提示
- 成功：顶部提示 3秒
- 错误：顶部提示 5秒
- 确认：弹窗确认

### 3. 操作流程
- 创建：弹窗表单
- 编辑：内联编辑或弹窗
- 删除：二次确认
- 批量：选中后操作

## 九、实施建议

### 1. 开发优先级
1. 搭建 MainLayout 主布局框架
2. 迁移现有页面到新布局
3. 实现仪表盘页面
4. 优化测试列表和详情页
5. 完善个人中心功能

### 2. 组件复用
- 创建通用组件：PageHeader、DataTable、StatusTag
- 统一表单组件：FormItem、ModalForm
- 统一布局组件：MainLayout、Sidebar

### 3. 性能优化
- 路由懒加载
- 组件按需引入
- 图片懒加载
- 表格虚拟滚动

这个设计方案将大大提升系统的可用性和美观度，使其更符合现代后台管理系统的标准。